(this["webpackJsonpexpense-app"]=this["webpackJsonpexpense-app"]||[]).push([[0],{120:function(t,e,n){},128:function(t,e,n){"use strict";n.r(e);var a=n(3),r=n(2),c=n.n(r),o=n(38),u=n.n(o),s=n(20),i=n(4),f=(n(120),n(0)),l=n(22),d=n(23),m=n(39),p=n(40),y=n.n(p),x=n(41),j=n.n(x),h=40,b=25,g=40,v=25,O=[[0,"Sat"],[1,"Mon"],[2,"Tue"],[3,"Wed"],[4,"Thu"],[5,"Fri"],[6,"Sun"]],G=f.h().domain(O.map((function(t){return t[0]}))),k=f.i().range([600-v,b]),w=y.a.scale(["#53cf8d","#f7d283","#e85151"]),E=f.i(),T=f.d().alphaDecay(.001).velocityDecay(.3).force("collide",f.c(10)).force("x",f.e((function(t){return t.focusX}))).force("y",f.f((function(t){return t.focusY}))).stop(),C=f.a();var D=function(t){var e=t.width,n=t.expenses,c=t.selectedWeek,o=t.categories,u=t.linkToCategory,s=t.changeDate,l=null,d=null,m=null,p=null,y=Object(r.useRef)(null),x=Object(r.useRef)(null);Object(r.useEffect)((function(){G.range([h,e-g]),T.on("tick",v),y.current=f.j(x.current),D(),S(),A(),M(),T.nodes(l).alpha(.9).restart(),C.container(y.current).on("start",N).on("drag",Y).on("end",I)}),[]),Object(r.useEffect)((function(){T.on("tick",v),D(),M(),T.nodes(l).alpha(.9).restart()}));var v=function(){d.attr("cx",(function(t){return t.x})).attr("cy",(function(t){return t.y}))},D=function(){var t=f.b(n,(function(t){return f.m.floor(t.date)}));k.domain(t);var a=(e-h-g)/2,r=Math.PI/6;p=f.m.range(t[0],f.m.offset(t[1],1)).map((function(t){return{week:t,x:h,y:k(t)+600}})),m=O.map((function(t){var n=Object(i.a)(t,2),o=n[0],u=n[1],s=Math.PI-r*o,l=a*Math.cos(s)+e/2,d=a*Math.sin(s)+b;return{name:u,date:f.k.offset(c,o),radius:80,x:l,y:d}})),l=j.a.chain(n).groupBy((function(t){return f.m.floor(t.date)})).map((function(t,n){var o=new Date(n);return t.map((function(t){var n=t.date.getDay(),u=G(n),s=k(o)+600;if(o.getTime()===c.getTime()){var i=Math.PI-r*n;u=a*Math.cos(i)+e/2,s=a*Math.sin(i)+b}return Object.assign(t,{focusX:u,focusY:s})}))})).flatten().value();var o=f.b(l,(function(t){return t.amount}));E.domain(o)},M=function(){(d=y.current.selectAll(".expense").data(l,(function(t){return t.name}))).exit().remove(),d=d.enter().append("circle").classed("expense",!0).attr("r",10).attr("fill-opacity",.25).attr("stroke-width",3).call(C).merge(d).attr("fill",(function(t){return w(E(t.amount))})).attr("stroke",(function(t){return w(E(t.amount))}))},S=function(){var t=y.current.selectAll(".day").data(m,(function(t){return t.name})).enter().append("g").classed("day",!0).attr("transform",(function(t){return"translate(".concat([t.x,t.y],")")}));t.append("circle").attr("r",(function(t){return t.radius})).attr("fill","#ccc").attr("opacity",.25),t.append("text").attr("y",(function(t){return t.radius+12})).attr("text-anchor","middle").attr("dy",".35em").attr("fill","#ccc").style("font-weight",600).text((function(t){return t.name}))},A=function(){var t=y.current.selectAll(".week").data(p,(function(t){return t.name})).enter().append("g").classed("week",!0).attr("transform",(function(t){return"translate(".concat([t.x,t.y],")")}));t.append("rect").attr("y",-5).attr("width",e-h-g).attr("height",10).attr("fill","#ccc").attr("opacity",.25);var n=f.l("%m/%d");t.append("text").attr("text-anchor","end").attr("dy",".35em").text((function(t){return n(t.week)}))},N=function(t){T.alphaTarget(.3).restart(),t.subject.fx=t.subject.x,t.subject.fy=t.subject.y},R=null,Y=function(t){t.subject.fx=t.x,t.subject.fy=t.y;var e=t.subject,n=t.x,a=t.y;o.forEach((function(t){var r=t.x,c=t.y,o=t.radius;r-o<n&&n<r+o&&c-o<a&&a<c+o&&(R={expense:e,category:t,type:"category"})})),m.forEach((function(t){var r=t.x,c=t.y,o=t.radius;r-o<n&&n<r+o&&c-o<a&&a<c+o&&(R={expense:e,day:t,type:"day"})}))},I=function(t){t.active||T.alphaTarget(0),t.subject.fx=null,t.subject.fy=null,R&&"category"===R.type?u(R):R&&"day"===R.type&&s(R),R=null};return Object(a.jsx)("g",{ref:x})},M=f.i().range([15,50]),S=f.d().alphaDecay(.001).velocityDecay(.3).force("collide",f.c().radius((function(t){return t.radius+10}))).force("x",f.e((function(t){return t.focusX}))).force("y",f.f((function(t){return t.focusY}))).stop();var A=function(t){var e=t.width,n=t.categories,c=t.links,o=null,u=null,s=null,i=Object(r.useRef)(null),l=Object(r.useRef)(null);Object(r.useEffect)((function(){S.on("tick",d),i.current=f.j(l.current),m(),p(),y(),S.nodes(o).alpha(.9).restart()}),[]),Object(r.useEffect)((function(){S.on("tick",d),m(),p(),y(),S.nodes(o).alpha(.9).restart()}));var d=function(){u.attr("transform",(function(t){return"translate(".concat([t.x,t.y],")")})),s.attr("x1",(function(t){return t.source.x})).attr("y1",(function(t){return t.source.y})).attr("x2",(function(t){return t.target.x})).attr("y2",(function(t){return t.target.y}))},m=function(){var t=f.b(n,(function(t){return t.total}));M.domain(t),o=n.map((function(t){return Object.assign(t,{radius:M(t.total),focusX:e/2,focusY:150})}))},p=function(){(s=i.current.selectAll("line").data(c)).exit().remove(),s=s.enter().insert("line","g").attr("stroke","#666").merge(s)},y=function(){(u=i.current.selectAll("g").data(n)).exit().remove();var t=u.enter().append("g").classed("category",!0);t.append("circle").attr("fill","#fff").attr("stroke","#666").attr("stroke-width",2),t.append("text").attr("text-anchor","middle").attr("dy",".35em"),(u=t.merge(u)).select("circle").attr("r",(function(t){return t.radius})),u.select("text").text((function(t){return t.name}))};return Object(a.jsx)("g",{ref:l})};var N=function(){var t=function(){var t=Object(r.useState)(0),e=Object(i.a)(t,2),n=(e[0],e[1]);return function(){return n((function(t){return++t}))}}(),e=Object(r.useState)([]),n=Object(i.a)(e,2),c=n[0],o=n[1],u=Object(r.useState)([{name:"Groceries",expenses:[],total:0},{name:"Restaurants",expenses:[],total:0}]),p=Object(i.a)(u,2),y=p[0],x=(p[1],Object(r.useState)(null)),j=Object(i.a)(x,2),h=j[0],b=j[1];Object(r.useEffect)((function(){var t=m.map((function(t,e){return{id:e,amount:t.amount,name:t.name,date:new Date(t.date)}})),e=f.g(t,(function(t){return f.m.floor(t.date)}));o(t),b(e)}),[]);var g=f.l("%B %d, %Y"),v=c.length>0,O=function(){var t=[];return y.forEach((function(e){e.expenses.forEach((function(n){f.m.floor(n.date).getTime()===h.getTime()&&t.push({source:n,target:e})}))})),t}(),G={width:900,expenses:c,categories:y,selectedWeek:h,links:O,linkToCategory:function(e){var n=e.expense,a=e.category,r=a.expenses.map((function(t){return t.id})).indexOf(n.id);-1!==r?(a.expenses.splice(r,1),a.total-=n.amount):(a.expenses.push(n),a.total+=n.amount),t()},changeDate:function(e){var n=e.expense,a=e.day;n.date=a.date,t()}};return Object(a.jsxs)("div",{className:"App",style:{width:900,margin:"auto"},children:[Object(a.jsxs)("header",{className:"flex",children:[Object(a.jsx)(l.a,{icon:d.a,onClick:function(){var t=f.m.offset(h,-1);b(t)},className:"btn"}),Object(a.jsxs)("h1",{children:["Week of ",g(h)]}),Object(a.jsx)(l.a,{icon:d.b,onClick:function(){var t=f.m.offset(h,-1);b(t)},className:"btn"})]}),Object(a.jsxs)("svg",{width:900,height:1800,children:[v&&Object(a.jsx)(A,Object(s.a)({},G)),v&&Object(a.jsx)(D,Object(s.a)({},G))]})]})};u.a.render(Object(a.jsx)(c.a.StrictMode,{children:Object(a.jsx)(N,{})}),document.getElementById("root"))},39:function(t){t.exports=JSON.parse('[{"name":"Gas","date":"07/26/2020","amount":26},{"name":"Grocery","date":"07/28/2020","amount":31},{"name":"Gas","date":"07/30/2020","amount":7},{"name":"Gas","date":"07/22/2020","amount":33},{"name":"Grocery","date":"07/15/2020","amount":13},{"name":"Gas","date":"07/12/2020","amount":41},{"name":"Gas","date":"07/11/2020","amount":4},{"name":"Gas","date":"07/28/2020","amount":45},{"name":"Gas","date":"07/11/2020","amount":28},{"name":"Gas","date":"07/30/2020","amount":36},{"name":"Gas","date":"07/23/2020","amount":48},{"name":"Grocery","date":"07/26/2020","amount":41},{"name":"Grocery","date":"07/15/2020","amount":6},{"name":"Coffee","date":"07/24/2020","amount":46},{"name":"Gas","date":"07/22/2020","amount":39},{"name":"Gas","date":"07/25/2020","amount":2},{"name":"Coffee","date":"07/10/2020","amount":40},{"name":"Gas","date":"07/28/2020","amount":29},{"name":"Grocery","date":"07/12/2020","amount":22},{"name":"Coffee","date":"07/30/2020","amount":16},{"name":"Gas","date":"07/20/2020","amount":6},{"name":"Grocery","date":"07/12/2020","amount":30},{"name":"Gas","date":"07/15/2020","amount":12},{"name":"Grocery","date":"07/28/2020","amount":20},{"name":"Gas","date":"07/15/2020","amount":45},{"name":"Grocery","date":"07/11/2020","amount":45},{"name":"Coffee","date":"07/26/2020","amount":38},{"name":"Grocery","date":"07/25/2020","amount":45},{"name":"Coffee","date":"07/17/2020","amount":35},{"name":"Grocery","date":"07/30/2020","amount":27}]')}},[[128,1,2]]]);
//# sourceMappingURL=main.13e0dbb0.chunk.js.map