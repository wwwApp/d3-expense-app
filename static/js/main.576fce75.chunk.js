(this["webpackJsonpexpense-app"]=this["webpackJsonpexpense-app"]||[]).push([[0],{122:function(e,t,n){},130:function(e,t,n){"use strict";n.r(t);var a=n(3),r=n(1),c=n.n(r),o=n(42),u=n.n(o),i=n(23),s=n(12),l=n(4),f=(n(122),n(0)),d=n(25),m=n(26),y=n(43),p=n(5),b=n.n(p),x=75,g=40,j=20,h=40,v=20,O=f.i().domain([0,6]),k=f.i(),w=f.i().range([8,24]),G=f.d().alphaDecay(.001).velocityDecay(.3).force("collide",f.c((function(e){return e.radius+2}))).force("x",f.e((function(e){return e.focusX}))).force("y",f.f((function(e){return e.focusY}))).stop(),T=f.a();var C=function(e){var t=e.width,n=e.colors,c=e.expenses,o=e.selectedWeek,u=e.categories,i=e.linkToCategory,s=e.changeDate,d=Object(r.useState)(!1),m=Object(l.a)(d,2),y=m[0],p=m[1],C=null,D=null,S=null,R=Object(r.useRef)(null),E=Object(r.useRef)(null),M=Object(r.useRef)(null),A=f.b(c,(function(e){return f.l.floor(e.date)})),B=Object(l.a)(A,2),N=B[0],z=B[1],W=150*f.n.range(N,z).length-100;Object(r.useEffect)((function(){G.on("tick",Y),y?(X(),J(),G.nodes(C).alpha(.9).restart()):(O.range([g,t-h]),R.current=f.k(E.current).append("g"),M.current=f.k(E.current).append("g"),M.current.append("rect").attr("height",18).attr("y",-9).attr("opacity",.85).attr("fill",n.white),M.current.append("text").attr("text-anchor","middle").attr("dy",".35em").attr("fill",n.black).style("font-size",14).style("pointer-events","none"),X(),J(),G.nodes(C).alpha(.9).restart(),T.container(R.current).on("start",P).on("drag",Q).on("end",$),p(!0))}));var Y=function(){D.attr("cx",(function(e){return e.x})).attr("cy",(function(e){return e.y}))},X=function(){var e=f.b(c,(function(e){return f.n.floor(e.date)}));k.range([W-v,j]).domain(e);var t=f.b(c,(function(e){return e.amount}));w.domain(t),C=b.a.chain(c).groupBy((function(e){return f.n.floor(e.date)})).map((function(e,t){return t=new Date(t),e.map((function(e){var t=I(e.date,!0),n=t.x,a=t.y;return Object.assign(e,{radius:w(e.amount),focusX:n,focusY:a,x:e.x||n,y:e.y||a})}))})).flatten().value();var n=f.l.range(o,f.n.offset(o,1));S=b.a.chain(n).map((function(e){return Object.assign(I(e,!0),{date:e})})).union(f.l.range(N,z).map((function(e){return Object.assign(I(e),{date:e})}))).value()},I=function(e,t){var n=e.getDay(),a=f.n.floor(e),r=O(n),c=k(a)+600+300;t&&a.getTime()===o.getTime()&&(c=675-.5*Math.abs(3-n)*x);return{x:r,y:c}},J=function(){(D=R.current.selectAll(".expense").data(C,(function(e){return e.name}))).exit().remove(),D=D.enter().append("circle").classed("expense",!0).attr("fill",n.white).style("cursor","move").call(T).on("mouseover",F).on("mouseleave",(function(){return M.current.style("display","none")})).merge(D).attr("r",(function(e){return e.radius})).attr("stroke",(function(e){return e.categories?n.black:""}))},q=!1,K=null,P=function(e){q=!0,G.alphaTarget(.3).restart(),e.subject.fx=e.subject.x,e.subject.fy=e.subject.y},Q=function(e){K=null,e.subject.fx=e.x,e.subject.fy=e.y;var t=e.subject,n=e.x,a=e.y;u.forEach((function(e){var r=e.x,c=e.y,o=e.radius;r-o<n&&n<r+o&&c-o<a&&a<c+o&&(K={expense:t,category:e,type:"category"})})),S.forEach((function(e){var r=e.x,c=e.y;r-55<n&&n<r+55&&c-x<a&&a<c+x&&(K={expense:t,day:e,type:"day"})}))},$=function(e){e.active||G.alphaTarget(0),e.subject.fx=null,e.subject.fy=null,K&&("category"===K.type?i(K):"day"===K.type&&s(K)),K=null,q=!1,M.current.style("display","none")},F=function(e,t){if(!q){M.current.style("display","block");var n=t.x,a=t.y,r=t.name,c=t.amount;M.current.attr("transform","translate("+[n,a+t.radius+14]+")");var o=f.g(",.2f");M.current.select("text").text("".concat(r," $").concat(o(c)));var u=M.current.select("text").node().getBoundingClientRect().width;M.current.select("rect").attr("width",u+6).attr("x",-u/2-3)}};return Object(a.jsx)("g",{ref:E,id:"expenses"})},D=n(22),S=n.n(D),R=n.p+"static/media/trash-icon.c8b03437.svg",E={y:165,radius:30,bg:"#ffd2c7"},M=f.j(),A=S.a.scale(["#53c3ac","#f7e883","#e85178"]),B=f.d().alphaDecay(.001).velocityDecay(.3).force("collide",f.c(65)).force("x",f.e((function(e){return e.focusX}))).force("y",f.f((function(e){return e.focusY}))).stop(),N=f.a();var z=function(e){var t=e.width,n=e.categories,c=e.expenses,o=e.selectedWeek,u=e.colors,i=e.deleteCategory,s=Object(r.useState)(!1),d=Object(l.a)(s,2),m=d[0],y=d[1],p=null,x=null,g=null,j=[],h=Object(r.useRef)(null),v=Object(r.useRef)(null),O=Object(r.useRef)(null);Object(r.useEffect)((function(){B.on("tick",k),m?(w(),T(),C(),B.nodes(p).alpha(.9).restart()):(h.current=f.k(v.current),w(),G(),T(),C(),B.nodes(p).alpha(.9).restart(),N.container(h.current).on("start",S).on("drag",z).on("end",W),y(!0))}));var k=function(){x.attr("transform",(function(e){return"translate(".concat([e.x,e.y],")")})),g.attr("transform",(function(e){var t=Math.atan2(e.target.y-e.source.y,e.target.x-e.source.x);return t*=180/Math.PI,"translate("+[e.source.x,e.source.y]+")rotate("+t+")"})).attr("d",(function(e){var t=e.source.date.getDay()<3?-1:1,n=Math.sqrt(Math.pow(e.target.x-e.source.x,2)+Math.pow(e.target.y-e.source.y,2));return"M0,0 Q"+[n/2,t*n/3]+" "+[n,0]}))},w=function(){var e=b.a.chain(c).groupBy((function(e){return f.l.floor(e.date)})).reduce((function(e,t,n){return e[n]=t.reduce((function(e,t){return e+t.amount}),0),e}),{}).value(),a=f.b(b.a.values(e));M.domain(a),p=n.map((function(e){var n=0;return e.expenses.filter((function(e){return f.n.floor(e.date).getTime()===o.getTime()})).forEach((function(t){n+=t.amount,j.push({source:t,target:e})})),Object.assign(e,{total:n,fill:A(M(n)),focusX:t/2,focusY:325,x:e.x||b.a.random(.25*t,.75*t),y:e.y||b.a.random(150,300)})}))},G=function(){E.x=t/2,O.current=h.current.append("g").attr("transform",(function(e){return"translate(".concat([E.x,E.y],")")})),O.current.append("circle").attr("r",E.radius).attr("fill",E.bg),O.current.append("image").attr("width",E.radius).attr("height",E.radius).attr("href",R).attr("x",-E.radius/2).attr("y",-E.radius/2),O.current.style("display","none")},T=function(){(g=h.current.selectAll("path").data(j)).exit().remove(),g=g.enter().insert("path","g").attr("stroke",u.black).attr("stroke-width",.5).attr("fill","none").merge(g)},C=function(){var e=f.o().duration(500);(x=h.current.selectAll(".category").data(n)).exit().remove();var t=x.enter().append("g").classed("category",!0).attr("id",(function(e){return e.name}));t.append("circle").attr("r",55).attr("stroke-width",1).style("cursor","move").call(N),t.append("text").attr("text-anchor","middle").attr("dy",".35em").attr("font-size",14).style("pointer-events","none"),(x=t.merge(x)).select("circle").attr("stroke",(function(e){return e.total?u.black:u.gray})).attr("fill",(function(e){return e.total?e.fill:u.gray})),x.select("text").text((function(e){return e.name})).transition(e).attr("fill",(function(e){return e.total?u.white:u.black}))},D=null,S=function(e){B.alphaTarget(.3).restart(),e.subject.fx=e.subject.x,e.subject.fy=e.subject.y,O.current.style("display","block")},z=function(e,t){D=null,e.subject.fx=e.x,e.subject.fy=e.y;var n=e.subject,a=e.x,r=e.y,c=E.x,o=E.y,u=E.radius,i=f.k("#".concat(t.name)).select("circle");c-u<a&&a<c+u&&o-u<r&&r<o+u?(D=n,i.transition(f.o().duration(100)).attr("r",u-10)):i.transition(f.o().duration(100)).attr("r",55)},W=function(e){e.active||B.alphaTarget(0),e.subject.fx=null,e.subject.fy=null,O.current.style("display","none"),D&&i(D),D=null};return Object(a.jsx)("g",{ref:v,id:"categories"})},W=75,Y=40,X=20,I=40,J=20,q=f.i().domain([0,6]),K=f.i(),P=f.j(),Q=S.a.scale(["#53c3ac","#f7e883","#e85178"]);var $=function(e){var t=e.width,n=e.colors,c=e.expenses,o=e.selectedWeek,u=Object(r.useState)(!1),i=Object(l.a)(u,2),s=i[0],d=i[1],m=Object(r.useRef)(null),y=Object(r.useRef)(null),p=null,x=null,g=f.b(c,(function(e){return f.l.floor(e.date)})),j=Object(l.a)(g,2),h=j[0],v=j[1],O=150*f.n.range(h,v).length-100;Object(r.useEffect)((function(){s?(k(),T()):(q.range([Y,t-I]),m.current=f.k(y.current),k(),G(),T(),d(!0))}));var k=function(){var e=f.b(c,(function(e){return f.n.floor(e.date)}));K.range([O-J,X]).domain(e);var t=b.a.chain(c).groupBy((function(e){return f.l.floor(e.date)})).reduce((function(e,t,n){return e[n]=t.reduce((function(e,t){return e+t.amount}),0),e}),{}).value(),n=f.b(b.a.values(t));P.domain(n),p=b.a.map(t,(function(e,t){t=new Date(t);var n=w(t,!0),a=n.x,r=n.y;return{date:t,fill:Q(P(e)),x:a,y:r}}));var a=f.l.range(o,f.n.offset(o,1));x=b.a.chain(a).map((function(e){return w(e,!0)})).union(f.l.range(h,v).map((function(e){return w(e)}))).value()},w=function(e,t){var n=e.getDay(),a=f.n.floor(e),r=q(n),c=K(a)+600+300;t&&a.getTime()===o.getTime()&&(c=675-.5*Math.abs(3-n)*W);return{x:r,y:c}},G=function(){m.current.selectAll(".back").data(x,(function(e){return e.date})).enter().insert("rect",".day").classed("back",!0).attr("transform",(function(e){return"translate(".concat([e.x,e.y],")")})).attr("width",110).attr("height",150).attr("x",-55).attr("y",-75).attr("fill",n.gray)},T=function(){var e=f.o().duration(500),t=m.current.selectAll(".day").data(p,(function(e){return e.date}));t.exit().remove();var a=t.enter().append("g").classed("day",!0).attr("transform",(function(e){return"translate(".concat([e.x,e.y],")")}));a.append("rect").attr("fill",(function(e){return e.fill})),a.append("text").attr("text-anchor","middle").attr("dy",".35em").attr("fill",n.white).attr("font-size",15),t=a.merge(t),t.transition(e).delay((function(e,t){return 50*e.date.getDay()})).attr("transform",(function(e){return"translate(".concat([e.x,e.y],")")})),t.select("rect").attr("width",110).attr("height",150).attr("x",-55).attr("y",-75).transition(e).attr("fill",(function(e){return e.fill}));var r=f.m("%m/%d");t.select("text").attr("y",(function(e){return 63.75})).text((function(e){return r(e.date)}))};return Object(a.jsx)("g",{ref:y,id:"days"})},F=750,H={white:"#fff8fa",gray:"#e1ecea",black:"#516561"};var L=function(){var e=Object(r.useState)([]),t=Object(l.a)(e,2),n=t[0],c=t[1],o=Object(r.useState)([]),u=Object(l.a)(o,2),p=u[0],b=u[1],x=Object(r.useState)(null),g=Object(l.a)(x,2),j=g[0],h=g[1],v=Object(r.useState)(!1),O=Object(l.a)(v,2),k=O[0],w=O[1],G=Object(r.useState)(!0),T=Object(l.a)(G,2),D=T[0],S=T[1];Object(r.useEffect)((function(){var e=y.map((function(e,t){return{id:t,amount:e.amount,name:e.name,date:new Date(e.date),categories:0}}));c(e);b([{name:"Restaurants",expenses:[],total:0},{name:"Travel",expenses:[],total:0},{name:"Dessert",expenses:[],total:0}]);var t=f.h(e,(function(e){return f.n.floor(e.date)}));h(t)}),[]);var R=f.m("%B %d, %Y"),E=n.length>0,M={width:F,margin:"auto",position:"relative"},A={fontSize:14,textAlign:"center",display:"block",padding:5,width:200,background:"none",color:H.black,border:"none",borderBottom:"2px solid "+H.black},B={overflow:"visible",position:"absolute",top:0,width:F,height:1800,zIndex:-1},N={width:F,colors:H,expenses:n,categories:p,selectedWeek:j,linkToCategory:function(e){var t=e.expense,a=e.category,r=p.map((function(e){return e.name})).indexOf(a.name),o=a.expenses.map((function(e){return e.id})).indexOf(t.id),u=n.map((function(e){return e.id})).indexOf(t.id),i=Object(s.a)(p),l=Object(s.a)(n);-1!==o?(i[r].expenses.splice(o,1),l[u].categories-=1):(i[r].expenses.push(t),l[u].categories+=1),b(i),c(l)},changeDate:function(e){var t=e.expense,a=e.day,r=n.map((function(e){return e.id})).indexOf(t.id),o=Object(s.a)(n);o[r].date=a.date,c(o)},deleteCategory:function(e){var t=Object(s.a)(n),a=n.map((function(e){return e.id}));e.expenses.forEach((function(e){var n=a.indexOf(e.id);t[n].categories-=1})),c(t),b((function(t){return t.filter((function(t){return t.name!==e.name}))}))}};return Object(a.jsxs)("div",{className:"App",style:M,children:[Object(a.jsxs)("header",{children:[Object(a.jsxs)("div",{className:"flex",children:[Object(a.jsx)(d.a,{icon:m.a,onClick:function(){if(!k){S(!1);var e=f.b(n,(function(e){return f.n.floor(e.date)}))[0].getTime(),t=f.n.offset(j,-1);t.getTime()===e&&w(!0),h(t)}},className:"btn ".concat(k&&"disabled")}),Object(a.jsxs)("h1",{children:["Week of ",R(j)]}),Object(a.jsx)(d.a,{icon:m.b,onClick:function(){if(!D){w(!1);var e=f.b(n,(function(e){return f.n.floor(e.date)}))[1].getTime(),t=f.n.offset(j,1);t.getTime()===e&&S(!0),h(t)}},className:"btn ".concat(D&&"disabled")})]}),Object(a.jsx)("div",{className:"flex",children:Object(a.jsx)("input",{style:A,type:"text",placeholder:"Add category",onKeyDown:function(e){if(13===e.keyCode){var t={name:e.target.value,expenses:[],total:0};b([].concat(Object(s.a)(p),[t])),e.target.value=""}}})})]}),Object(a.jsxs)("svg",{width:F,height:1800,style:B,children:[E&&Object(a.jsx)($,Object(i.a)({},N)),E&&Object(a.jsx)(z,Object(i.a)({},N)),E&&Object(a.jsx)(C,Object(i.a)({},N))]})]})};u.a.render(Object(a.jsx)(c.a.StrictMode,{children:Object(a.jsx)(L,{})}),document.getElementById("root"))},43:function(e){e.exports=JSON.parse('[{"name":"Gas","date":"07/26/2020","amount":26},{"name":"Grocery","date":"07/28/2020","amount":31},{"name":"Gas","date":"07/30/2020","amount":7},{"name":"Gas","date":"07/22/2020","amount":33},{"name":"Grocery","date":"07/15/2020","amount":13},{"name":"Gas","date":"07/12/2020","amount":41},{"name":"Gas","date":"07/11/2020","amount":4},{"name":"Gas","date":"07/28/2020","amount":45},{"name":"Gas","date":"07/11/2020","amount":28},{"name":"Gas","date":"07/30/2020","amount":36},{"name":"Gas","date":"07/23/2020","amount":48},{"name":"Grocery","date":"07/26/2020","amount":41},{"name":"Grocery","date":"07/15/2020","amount":6},{"name":"Coffee","date":"07/24/2020","amount":46},{"name":"Gas","date":"07/22/2020","amount":39},{"name":"Gas","date":"07/25/2020","amount":2},{"name":"Coffee","date":"07/10/2020","amount":40},{"name":"Gas","date":"07/28/2020","amount":29},{"name":"Grocery","date":"07/12/2020","amount":22},{"name":"Coffee","date":"07/30/2020","amount":16},{"name":"Gas","date":"07/20/2020","amount":6},{"name":"Grocery","date":"07/12/2020","amount":30},{"name":"Gas","date":"07/15/2020","amount":12},{"name":"Grocery","date":"07/28/2020","amount":20},{"name":"Gas","date":"07/15/2020","amount":45},{"name":"Grocery","date":"07/11/2020","amount":45},{"name":"Coffee","date":"07/26/2020","amount":38},{"name":"Grocery","date":"07/25/2020","amount":45},{"name":"Coffee","date":"07/17/2020","amount":35},{"name":"Grocery","date":"07/30/2020","amount":27},{"name":"Grocery","date":"06/28/2020","amount":45},{"name":"Coffee","date":"06/25/2020","amount":38},{"name":"Grocery","date":"06/28/2020","amount":45},{"name":"Coffee","date":"06/21/2020","amount":35},{"name":"Grocery","date":"06/30/2020","amount":27}]')}},[[130,1,2]]]);
//# sourceMappingURL=main.576fce75.chunk.js.map