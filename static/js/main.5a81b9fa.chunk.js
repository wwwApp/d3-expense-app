(this["webpackJsonpexpense-app"]=this["webpackJsonpexpense-app"]||[]).push([[0],{122:function(e,t,n){},130:function(e,t,n){"use strict";n.r(t);var a=n(3),r=n(1),o=n.n(r),c=n(41),u=n.n(c),s=n(22),i=n(43),l=n(4),f=(n(122),n(0)),d=n(24),m=n(25),y=n(42),p=n(5),x=n.n(p),b=75,g=40,j=20,h=40,v=20,O=f.i().domain([0,6]),k=f.i(),w=f.i().range([8,24]),G=f.d().alphaDecay(.001).velocityDecay(.3).force("collide",f.c((function(e){return e.radius+2}))).force("x",f.e((function(e){return e.focusX}))).force("y",f.f((function(e){return e.focusY}))).stop(),D=f.a();var C=function(e){var t=e.width,n=e.colors,o=e.expenses,c=e.selectedWeek,u=e.categories,s=e.linkToCategory,i=e.changeDate,d=Object(r.useState)(!1),m=Object(l.a)(d,2),y=m[0],p=m[1],C=null,T=null,S=null,M=Object(r.useRef)(null),R=Object(r.useRef)(null),A=Object(r.useRef)(null),E=f.b(o,(function(e){return f.l.floor(e.date)})),B=Object(l.a)(E,2),N=B[0],z=B[1],W=150*f.n.range(N,z).length-100;Object(r.useEffect)((function(){G.on("tick",Y),y?(X(),J(),G.nodes(C).alpha(.9).restart()):(O.range([g,t-h]),M.current=f.k(R.current).append("g"),A.current=f.k(R.current).append("g"),A.current.append("rect").attr("height",18).attr("y",-9).attr("opacity",.85).attr("fill",n.white),A.current.append("text").attr("text-anchor","middle").attr("dy",".35em").attr("fill",n.black).style("font-size",14).style("pointer-events","none"),X(),J(),G.nodes(C).alpha(.9).restart(),D.container(M.current).on("start",P).on("drag",Q).on("end",$),p(!0))}));var Y=function(){T.attr("cx",(function(e){return e.x})).attr("cy",(function(e){return e.y}))},X=function(){var e=f.b(o,(function(e){return f.n.floor(e.date)}));k.range([W-v,j]).domain(e);var t=f.b(o,(function(e){return e.amount}));w.domain(t),C=x.a.chain(o).groupBy((function(e){return f.n.floor(e.date)})).map((function(e,t){return t=new Date(t),e.map((function(e){var t=I(e.date,!0),n=t.x,a=t.y;return Object.assign(e,{radius:w(e.amount),focusX:n,focusY:a,x:e.x||n,y:e.y||a})}))})).flatten().value();var n=f.l.range(c,f.n.offset(c,1));S=x.a.chain(n).map((function(e){return Object.assign(I(e,!0),{date:e})})).union(f.l.range(N,z).map((function(e){return Object.assign(I(e),{date:e})}))).value()},I=function(e,t){var n=e.getDay(),a=f.n.floor(e),r=O(n),o=k(a)+600+300;t&&a.getTime()===c.getTime()&&(o=675-.5*Math.abs(3-n)*b);return{x:r,y:o}},J=function(){(T=M.current.selectAll(".expense").data(C,(function(e){return e.name}))).exit().remove(),T=T.enter().append("circle").classed("expense",!0).attr("fill",n.white).style("cursor","move").call(D).on("mouseover",F).on("mouseleave",(function(){return A.current.style("display","none")})).merge(T).attr("r",(function(e){return e.radius})).attr("stroke",(function(e){return e.categories?n.black:""}))},q=!1,K=null,P=function(e){q=!0,G.alphaTarget(.3).restart(),e.subject.fx=e.subject.x,e.subject.fy=e.subject.y},Q=function(e){K=null,e.subject.fx=e.x,e.subject.fy=e.y;var t=e.subject,n=e.x,a=e.y;u.forEach((function(e){var r=e.x,o=e.y,c=e.radius;r-c<n&&n<r+c&&o-c<a&&a<o+c&&(K={expense:t,category:e,type:"category"})})),S.forEach((function(e){var r=e.x,o=e.y;r-55<n&&n<r+55&&o-b<a&&a<o+b&&(K={expense:t,day:e,type:"day"})}))},$=function(e){e.active||G.alphaTarget(0),e.subject.fx=null,e.subject.fy=null,K&&("category"===K.type?s(K):"day"===K.type&&i(K)),K=null,q=!1},F=function(e,t){if(!q){A.current.style("display","block");var n=t.x,a=t.y,r=t.name,o=t.amount;A.current.attr("transform","translate("+[n,a+t.radius+14]+")");var c=f.g(",.2f");A.current.select("text").text("".concat(r," $").concat(c(o)));var u=A.current.select("text").node().getBoundingClientRect().width;A.current.select("rect").attr("width",u+6).attr("x",-u/2-3)}};return Object(a.jsx)("g",{ref:R})},T=n(21),S=n.n(T),M=f.j(),R=S.a.scale(["#53c3ac","#f7e883","#e85178"]),A=f.d().alphaDecay(.001).velocityDecay(.3).force("collide",f.c((function(e){return e.radius+10}))).force("x",f.e((function(e){return e.focusX}))).force("y",f.f((function(e){return e.focusY}))).stop();var E=function(e){var t=e.width,n=e.categories,o=e.expenses,c=e.selectedWeek,u=e.colors,s=Object(r.useState)(!1),i=Object(l.a)(s,2),d=i[0],m=i[1],y=null,p=null,b=null,g=[],j=Object(r.useRef)(null),h=Object(r.useRef)(null);Object(r.useEffect)((function(){A.on("tick",v),d?(O(),k(),w(),A.nodes(y).alpha(.9).restart()):(j.current=f.k(h.current),O(),k(),w(),A.nodes(y).alpha(.9).restart(),m(!0))}));var v=function(){p.attr("transform",(function(e){return"translate(".concat([e.x,e.y],")")})),b.attr("transform",(function(e){var t=Math.atan2(e.target.y-e.source.y,e.target.x-e.source.x);return t*=180/Math.PI,"translate("+[e.source.x,e.source.y]+")rotate("+t+")"})).attr("d",(function(e){var t=e.source.date.getDay()<3?-1:1,n=Math.sqrt(Math.pow(e.target.x-e.source.x,2)+Math.pow(e.target.y-e.source.y,2));return"M0,0 Q"+[n/2,t*n/3]+" "+[n,0]}))},O=function(){var e=x.a.chain(o).groupBy((function(e){return f.l.floor(e.date)})).reduce((function(e,t,n){return e[n]=t.reduce((function(e,t){return e+t.amount}),0),e}),{}).value(),a=f.b(x.a.values(e));M.domain(a),y=n.map((function(e){var n=0;return e.expenses.filter((function(e){return f.n.floor(e.date).getTime()===c.getTime()})).forEach((function(t){n+=t.amount,g.push({source:t,target:e})})),Object.assign(e,{total:n,fill:R(M(n)),radius:55,focusX:t/2,focusY:325,x:e.x||x.a.random(.25*t,.75*t),y:e.y||x.a.random(150,300)})}))},k=function(){(b=j.current.selectAll("path").data(g)).exit().remove(),b=b.enter().insert("path","g").attr("stroke",u.black).attr("stroke-width",.5).attr("fill","none").merge(b)},w=function(){var e=f.o().duration(500);(p=j.current.selectAll("g").data(n)).exit().remove();var t=p.enter().append("g").classed("category",!0);t.append("circle").attr("r",55).attr("stroke-width",1),t.append("text").attr("text-anchor","middle").attr("dy",".35em").attr("font-size",14).style("pointer-events","none"),(p=t.merge(p)).select("circle").attr("stroke",(function(e){return e.total?u.black:u.gray})).attr("fill",(function(e){return e.total?e.fill:u.gray})),p.select("text").text((function(e){return e.name})).transition(e).attr("fill",(function(e){return e.total?u.white:u.black}))};return Object(a.jsx)("g",{ref:h})},B=75,N=40,z=20,W=40,Y=20,X=f.i().domain([0,6]),I=f.i(),J=f.j(),q=S.a.scale(["#53c3ac","#f7e883","#e85178"]);var K=function(e){var t=e.width,n=e.colors,o=e.expenses,c=e.selectedWeek,u=Object(r.useState)(!1),s=Object(l.a)(u,2),i=s[0],d=s[1],m=Object(r.useRef)(null),y=Object(r.useRef)(null),p=null,b=null,g=f.b(o,(function(e){return f.l.floor(e.date)})),j=Object(l.a)(g,2),h=j[0],v=j[1],O=150*f.n.range(h,v).length-100;Object(r.useEffect)((function(){i?(k(),D()):(X.range([N,t-W]),m.current=f.k(y.current),k(),G(),D(),d(!0))}));var k=function(){var e=f.b(o,(function(e){return f.n.floor(e.date)}));I.range([O-Y,z]).domain(e);var t=x.a.chain(o).groupBy((function(e){return f.l.floor(e.date)})).reduce((function(e,t,n){return e[n]=t.reduce((function(e,t){return e+t.amount}),0),e}),{}).value(),n=f.b(x.a.values(t));J.domain(n),p=x.a.map(t,(function(e,t){t=new Date(t);var n=w(t,!0),a=n.x,r=n.y;return{date:t,fill:q(J(e)),x:a,y:r}}));var a=f.l.range(c,f.n.offset(c,1));b=x.a.chain(a).map((function(e){return w(e,!0)})).union(f.l.range(h,v).map((function(e){return w(e)}))).value()},w=function(e,t){var n=e.getDay(),a=f.n.floor(e),r=X(n),o=I(a)+600+300;t&&a.getTime()===c.getTime()&&(o=675-.5*Math.abs(3-n)*B);return{x:r,y:o}},G=function(){m.current.selectAll(".back").data(b,(function(e){return e.date})).enter().insert("rect",".day").classed("back",!0).attr("transform",(function(e){return"translate(".concat([e.x,e.y],")")})).attr("width",110).attr("height",150).attr("x",-55).attr("y",-75).attr("fill",n.gray)},D=function(){var e=f.o().duration(500),t=m.current.selectAll(".day").data(p,(function(e){return e.date}));t.exit().remove();var a=t.enter().append("g").classed("day",!0).attr("transform",(function(e){return"translate(".concat([e.x,e.y],")")}));a.append("rect").attr("fill",(function(e){return e.fill})),a.append("text").attr("text-anchor","middle").attr("dy",".35em").attr("fill",n.white).attr("font-size",15),t=a.merge(t),t.transition(e).delay((function(e,t){return 50*e.date.getDay()})).attr("transform",(function(e){return"translate(".concat([e.x,e.y],")")})),t.select("rect").attr("width",110).attr("height",150).attr("x",-55).attr("y",-75).transition(e).attr("fill",(function(e){return e.fill}));var r=f.m("%m/%d");t.select("text").attr("y",(function(e){return 63.75})).text((function(e){return r(e.date)}))};return Object(a.jsx)("g",{ref:y})};var P=750,Q={white:"#fff8fa",gray:"#e1ecea",black:"#516561"};var $=function(){var e=function(){var e=Object(r.useState)(0),t=Object(l.a)(e,2),n=(t[0],t[1]);return function(){return n((function(e){return++e}))}}(),t=Object(r.useState)([]),n=Object(l.a)(t,2),o=n[0],c=n[1],u=Object(r.useState)([{name:"Restaurants",expenses:[],total:0},{name:"Travel",expenses:[],total:0},{name:"Dessert",expenses:[],total:0}]),p=Object(l.a)(u,2),x=p[0],b=p[1],g=Object(r.useState)(null),j=Object(l.a)(g,2),h=j[0],v=j[1];Object(r.useEffect)((function(){var e=y.map((function(e,t){return{id:t,amount:e.amount,name:e.name,date:new Date(e.date),categories:0}})),t=f.h(e,(function(e){return f.n.floor(e.date)}));c(e),v(t)}),[]);var O=f.m("%B %d, %Y"),k=o.length>0,w={width:P,margin:"auto",position:"relative"},G={fontSize:14,textAlign:"center",display:"block",padding:5,width:200,background:"none",color:Q.black,border:"none",borderBottom:"2px solid "+Q.black},D={overflow:"visible",position:"absolute",top:0,width:P,height:1800,zIndex:-1},T={width:P,colors:Q,expenses:o,categories:x,selectedWeek:h,linkToCategory:function(t){var n=t.expense,a=t.category,r=a.expenses.map((function(e){return e.id})).indexOf(n.id);-1!==r?(a.expenses.splice(r,1),n.categories-=1):(a.expenses.push(n),n.categories+=1),e()},changeDate:function(t){var n=t.expense,a=t.day;n.date=a.date,e()}};return Object(a.jsxs)("div",{className:"App",style:w,children:[Object(a.jsxs)("header",{children:[Object(a.jsxs)("div",{className:"flex",children:[Object(a.jsx)(d.a,{icon:m.a,onClick:function(){var e=f.n.offset(h,-1);v(e)},className:"btn"}),Object(a.jsxs)("h1",{children:["Week of ",O(h)]}),Object(a.jsx)(d.a,{icon:m.b,onClick:function(){var e=f.n.offset(h,1);v(e)},className:"btn"})]}),Object(a.jsx)("div",{className:"flex",children:Object(a.jsx)("input",{style:G,type:"text",placeholder:"Add category",onKeyDown:function(e){if(13===e.keyCode){var t={name:e.target.value,expenses:[],total:0};b([].concat(Object(i.a)(x),[t]))}}})})]}),Object(a.jsxs)("svg",{width:P,height:1800,style:D,children:[k&&Object(a.jsx)(K,Object(s.a)({},T)),k&&Object(a.jsx)(E,Object(s.a)({},T)),k&&Object(a.jsx)(C,Object(s.a)({},T))]})]})};u.a.render(Object(a.jsx)(o.a.StrictMode,{children:Object(a.jsx)($,{})}),document.getElementById("root"))},42:function(e){e.exports=JSON.parse('[{"name":"Gas","date":"07/26/2020","amount":26},{"name":"Grocery","date":"07/28/2020","amount":31},{"name":"Gas","date":"07/30/2020","amount":7},{"name":"Gas","date":"07/22/2020","amount":33},{"name":"Grocery","date":"07/15/2020","amount":13},{"name":"Gas","date":"07/12/2020","amount":41},{"name":"Gas","date":"07/11/2020","amount":4},{"name":"Gas","date":"07/28/2020","amount":45},{"name":"Gas","date":"07/11/2020","amount":28},{"name":"Gas","date":"07/30/2020","amount":36},{"name":"Gas","date":"07/23/2020","amount":48},{"name":"Grocery","date":"07/26/2020","amount":41},{"name":"Grocery","date":"07/15/2020","amount":6},{"name":"Coffee","date":"07/24/2020","amount":46},{"name":"Gas","date":"07/22/2020","amount":39},{"name":"Gas","date":"07/25/2020","amount":2},{"name":"Coffee","date":"07/10/2020","amount":40},{"name":"Gas","date":"07/28/2020","amount":29},{"name":"Grocery","date":"07/12/2020","amount":22},{"name":"Coffee","date":"07/30/2020","amount":16},{"name":"Gas","date":"07/20/2020","amount":6},{"name":"Grocery","date":"07/12/2020","amount":30},{"name":"Gas","date":"07/15/2020","amount":12},{"name":"Grocery","date":"07/28/2020","amount":20},{"name":"Gas","date":"07/15/2020","amount":45},{"name":"Grocery","date":"07/11/2020","amount":45},{"name":"Coffee","date":"07/26/2020","amount":38},{"name":"Grocery","date":"07/25/2020","amount":45},{"name":"Coffee","date":"07/17/2020","amount":35},{"name":"Grocery","date":"07/30/2020","amount":27},{"name":"Grocery","date":"06/28/2020","amount":45},{"name":"Coffee","date":"06/25/2020","amount":38},{"name":"Grocery","date":"06/28/2020","amount":45},{"name":"Coffee","date":"06/21/2020","amount":35},{"name":"Grocery","date":"06/30/2020","amount":27}]')}},[[130,1,2]]]);
//# sourceMappingURL=main.5a81b9fa.chunk.js.map