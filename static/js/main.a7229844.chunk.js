(this["webpackJsonpexpense-app"]=this["webpackJsonpexpense-app"]||[]).push([[0],{122:function(t,e,n){},130:function(t,e,n){"use strict";n.r(e);var a=n(3),r=n(1),c=n.n(r),o=n(42),u=n.n(o),i=n(23),s=n(12),l=n(4),f=(n(122),n(0)),d=n(25),m=n(26),y=n(43),p=n(5),b=n.n(p),x=75,g=40,j=20,h=40,v=20,O=f.i().domain([0,6]),k=f.i(),w=f.i().range([8,24]),G=f.d().alphaDecay(.001).velocityDecay(.3).force("collide",f.c((function(t){return t.radius+2}))).force("x",f.e((function(t){return t.focusX}))).force("y",f.f((function(t){return t.focusY}))).stop(),T=f.a();var C=function(t){var e=t.width,n=t.colors,c=t.expenses,o=t.selectedWeek,u=t.categories,i=t.linkToCategory,s=t.changeDate,d=Object(r.useState)(!1),m=Object(l.a)(d,2),y=m[0],p=m[1],C=null,D=null,S=null,R=Object(r.useRef)(null),E=Object(r.useRef)(null),M=Object(r.useRef)(null),A=f.b(c,(function(t){return f.l.floor(t.date)})),B=Object(l.a)(A,2),N=B[0],z=B[1],W=150*f.n.range(N,z).length-100;Object(r.useEffect)((function(){G.on("tick",Y),y?(X(),J(),G.nodes(C).alpha(.9).restart()):(O.range([g,e-h]),R.current=f.k(E.current).append("g"),M.current=f.k(E.current).append("g"),M.current.append("rect").attr("height",18).attr("y",-9).attr("opacity",.85).attr("fill",n.white),M.current.append("text").attr("text-anchor","middle").attr("dy",".35em").attr("fill",n.black).style("font-size",14).style("pointer-events","none"),X(),J(),G.nodes(C).alpha(.9).restart(),T.container(R.current).on("start",P).on("drag",Q).on("end",$),p(!0))}));var Y=function(){D.attr("cx",(function(t){return t.x})).attr("cy",(function(t){return t.y}))},X=function(){var t=f.b(c,(function(t){return f.n.floor(t.date)}));k.range([W-v,j]).domain(t);var e=f.b(c,(function(t){return t.amount}));w.domain(e),C=b.a.chain(c).groupBy((function(t){return f.n.floor(t.date)})).map((function(t,e){return e=new Date(e),t.map((function(t){var e=I(t.date,!0),n=e.x,a=e.y;return Object.assign(t,{radius:w(t.amount),focusX:n,focusY:a,x:t.x||n,y:t.y||a})}))})).flatten().value();var n=f.l.range(o,f.n.offset(o,1));S=b.a.chain(n).map((function(t){return Object.assign(I(t,!0),{date:t})})).union(f.l.range(N,z).map((function(t){return Object.assign(I(t),{date:t})}))).value()},I=function(t,e){var n=t.getDay(),a=f.n.floor(t),r=O(n),c=k(a)+600+300;e&&a.getTime()===o.getTime()&&(c=675-.5*Math.abs(3-n)*x);return{x:r,y:c}},J=function(){(D=R.current.selectAll(".expense").data(C,(function(t){return t.name}))).exit().remove(),D=D.enter().append("circle").classed("expense",!0).attr("fill",n.white).style("cursor","move").call(T).on("mouseover",F).on("mouseleave",(function(){return M.current.style("display","none")})).merge(D).attr("r",(function(t){return t.radius})).attr("stroke",(function(t){return t.categories?n.black:""}))},q=!1,K=null,P=function(t){q=!0,G.alphaTarget(.3).restart(),t.subject.fx=t.subject.x,t.subject.fy=t.subject.y},Q=function(t){K=null,t.subject.fx=t.x,t.subject.fy=t.y;var e=t.subject,n=t.x,a=t.y;u.forEach((function(t){var r=t.x,c=t.y,o=t.radius;r-o<n&&n<r+o&&c-o<a&&a<c+o&&(K={expense:e,category:t,type:"category"})})),S.forEach((function(t){var r=t.x,c=t.y;r-55<n&&n<r+55&&c-x<a&&a<c+x&&(K={expense:e,day:t,type:"day"})}))},$=function(t){t.active||G.alphaTarget(0),t.subject.fx=null,t.subject.fy=null,K&&("category"===K.type?i(K):"day"===K.type&&s(K)),K=null,q=!1,M.current.style("display","none")},F=function(t,e){if(!q){M.current.style("display","block");var n=e.x,a=e.y,r=e.name,c=e.amount;M.current.attr("transform","translate("+[n,a+e.radius+14]+")");var o=f.g(",.2f");M.current.select("text").text("".concat(r," $").concat(o(c)));var u=M.current.select("text").node().getBoundingClientRect().width;M.current.select("rect").attr("width",u+6).attr("x",-u/2-3)}};return Object(a.jsx)("g",{ref:E,id:"expenses"})},D=n(22),S=n.n(D),R=n.p+"static/media/trash-icon.c8b03437.svg",E={y:170,radius:30,bg:"#ffd2c7"},M=f.j(),A=S.a.scale(["#53c3ac","#f7e883","#e85178"]),B=f.d().alphaDecay(.001).velocityDecay(.3).force("collide",f.c(65)).force("x",f.e((function(t){return t.focusX}))).force("y",f.f((function(t){return t.focusY}))).stop(),N=f.a();var z=function(t){var e=t.width,n=t.categories,c=t.expenses,o=t.selectedWeek,u=t.colors,i=t.deleteCategory,s=Object(r.useState)(!1),d=Object(l.a)(s,2),m=d[0],y=d[1],p=null,x=null,g=null,j=[],h=Object(r.useRef)(null),v=Object(r.useRef)(null),O=Object(r.useRef)(null);Object(r.useEffect)((function(){B.on("tick",k),m?(w(),T(),C(),B.nodes(p).alpha(.9).restart()):(h.current=f.k(v.current),w(),G(),T(),C(),B.nodes(p).alpha(.9).restart(),N.container(h.current).on("start",S).on("drag",z).on("end",W),y(!0))}));var k=function(){x.attr("transform",(function(t){return"translate(".concat([t.x,t.y],")")})),g.attr("transform",(function(t){var e=Math.atan2(t.target.y-t.source.y,t.target.x-t.source.x);return e*=180/Math.PI,"translate("+[t.source.x,t.source.y]+")rotate("+e+")"})).attr("d",(function(t){var e=t.source.date.getDay()<3?-1:1,n=Math.sqrt(Math.pow(t.target.x-t.source.x,2)+Math.pow(t.target.y-t.source.y,2));return"M0,0 Q"+[n/2,e*n/3]+" "+[n,0]}))},w=function(){var t=b.a.chain(c).groupBy((function(t){return f.l.floor(t.date)})).reduce((function(t,e,n){return t[n]=e.reduce((function(t,e){return t+e.amount}),0),t}),{}).value(),a=f.b(b.a.values(t));M.domain(a),p=n.map((function(t){var n=0;return t.expenses.filter((function(t){return f.n.floor(t.date).getTime()===o.getTime()})).forEach((function(e){n+=e.amount,j.push({source:e,target:t})})),Object.assign(t,{total:n,fill:A(M(n)),radius:55,focusX:e/2,focusY:325,x:t.x||b.a.random(.25*e,.75*e),y:t.y||b.a.random(150,300)})}))},G=function(){E.x=e/2,O.current=h.current.append("g").attr("transform",(function(t){return"translate(".concat([E.x,E.y],")")})),O.current.append("circle").attr("r",E.radius).attr("fill",E.bg),O.current.append("image").attr("width",E.radius).attr("height",E.radius).attr("href",R).attr("x",-E.radius/2).attr("y",-E.radius/2),O.current.style("display","none")},T=function(){(g=h.current.selectAll("path").data(j)).exit().remove(),g=g.enter().insert("path","g").attr("stroke",u.black).attr("stroke-width",.5).attr("fill","none").merge(g)},C=function(){var t=f.o().duration(500);(x=h.current.selectAll(".category").data(n)).exit().remove();var e=x.enter().append("g").classed("category",!0);e.append("circle").attr("r",55).attr("stroke-width",1).style("cursor","move").call(N),e.append("text").attr("text-anchor","middle").attr("dy",".35em").attr("font-size",16).style("pointer-events","none"),(x=e.merge(x)).select("circle").attr("stroke",(function(t){return t.total?u.black:u.gray})).attr("fill",(function(t){return t.total?t.fill:u.gray})),x.select("text").text((function(t){return t.name})).transition(t).attr("fill",(function(t){return t.total?u.white:u.black}))},D=null,S=function(t){B.alphaTarget(.3).restart(),t.subject.fx=t.subject.x,t.subject.fy=t.subject.y,O.current.style("display","block")},z=function(t){D=null,t.subject.fx=t.x,t.subject.fy=t.y;var e=t.subject,n=t.x,a=t.y,r=E.x,c=E.y,o=E.radius,u=f.k(this);r-o<n&&n<r+o&&c-o<a&&a<c+o?(D=e,u.transition(f.o().duration(100)).attr("r",o-10)):u.transition(f.o().duration(100)).attr("r",55)},W=function(t){t.active||B.alphaTarget(0),t.subject.fx=null,t.subject.fy=null,O.current.style("display","none"),D&&i(D),D=null};return Object(a.jsx)("g",{ref:v,id:"categories"})},W=75,Y=40,X=20,I=40,J=20,q=f.i().domain([0,6]),K=f.i(),P=f.j(),Q=S.a.scale(["#53c3ac","#f7e883","#e85178"]);var $=function(t){var e=t.width,n=t.colors,c=t.expenses,o=t.selectedWeek,u=Object(r.useState)(!1),i=Object(l.a)(u,2),s=i[0],d=i[1],m=Object(r.useRef)(null),y=Object(r.useRef)(null),p=null,x=null,g=f.b(c,(function(t){return f.l.floor(t.date)})),j=Object(l.a)(g,2),h=j[0],v=j[1],O=150*f.n.range(h,v).length-100;Object(r.useEffect)((function(){s?(k(),T()):(q.range([Y,e-I]),m.current=f.k(y.current),k(),G(),T(),d(!0))}));var k=function(){var t=f.b(c,(function(t){return f.n.floor(t.date)}));K.range([O-J,X]).domain(t);var e=b.a.chain(c).groupBy((function(t){return f.l.floor(t.date)})).reduce((function(t,e,n){return t[n]=e.reduce((function(t,e){return t+e.amount}),0),t}),{}).value(),n=f.b(b.a.values(e));P.domain(n),p=b.a.map(e,(function(t,e){e=new Date(e);var n=w(e,!0),a=n.x,r=n.y;return{date:e,fill:Q(P(t)),x:a,y:r}}));var a=f.l.range(o,f.n.offset(o,1));x=b.a.chain(a).map((function(t){return w(t,!0)})).union(f.l.range(h,v).map((function(t){return w(t)}))).value()},w=function(t,e){var n=t.getDay(),a=f.n.floor(t),r=q(n),c=K(a)+600+300;e&&a.getTime()===o.getTime()&&(c=675-.5*Math.abs(3-n)*W);return{x:r,y:c}},G=function(){m.current.selectAll(".back").data(x,(function(t){return t.date})).enter().insert("rect",".day").classed("back",!0).attr("transform",(function(t){return"translate(".concat([t.x,t.y],")")})).attr("width",110).attr("height",150).attr("x",-55).attr("y",-75).attr("fill",n.gray)},T=function(){var t=f.o().duration(500),e=m.current.selectAll(".day").data(p,(function(t){return t.date}));e.exit().remove();var a=e.enter().append("g").classed("day",!0).attr("transform",(function(t){return"translate(".concat([t.x,t.y],")")}));a.append("rect").attr("fill",(function(t){return t.fill})),a.append("text").attr("text-anchor","middle").attr("dy",".35em").attr("fill",n.white).attr("font-size",15),e=a.merge(e),e.transition(t).delay((function(t,e){return 50*t.date.getDay()})).attr("transform",(function(t){return"translate(".concat([t.x,t.y],")")})),e.select("rect").attr("width",110).attr("height",150).attr("x",-55).attr("y",-75).transition(t).attr("fill",(function(t){return t.fill}));var r=f.m("%m/%d");e.select("text").attr("y",(function(t){return 63.75})).text((function(t){return r(t.date)}))};return Object(a.jsx)("g",{ref:y,id:"days"})},F=750,H={white:"#fff8fa",gray:"#e1ecea",black:"#516561"};var L=function(){var t=Object(r.useState)([]),e=Object(l.a)(t,2),n=e[0],c=e[1],o=Object(r.useState)([]),u=Object(l.a)(o,2),p=u[0],b=u[1],x=Object(r.useState)(null),g=Object(l.a)(x,2),j=g[0],h=g[1],v=Object(r.useState)(!1),O=Object(l.a)(v,2),k=O[0],w=O[1],G=Object(r.useState)(!0),T=Object(l.a)(G,2),D=T[0],S=T[1];Object(r.useEffect)((function(){var t=y.map((function(t,e){return{id:e,amount:t.amount,name:t.name,date:new Date(t.date),categories:0}}));c(t);b([{name:"Restaurants",expenses:[],total:0},{name:"Travel",expenses:[],total:0},{name:"Dessert",expenses:[],total:0}]);var e=f.h(t,(function(t){return f.n.floor(t.date)}));h(e)}),[]);var R=f.m("%B %d, %Y"),E=n.length>0,M={width:F,margin:"auto",position:"relative",paddingTop:25},A={fontSize:16,textAlign:"center",display:"block",padding:5,width:200,background:"none",color:H.black,border:"none",borderBottom:"2px solid "+H.black},B={overflow:"visible",position:"absolute",top:0,width:F,height:1800,zIndex:-1},N={width:F,colors:H,expenses:n,categories:p,selectedWeek:j,linkToCategory:function(t){var e=t.expense,a=t.category,r=p.map((function(t){return t.name})).indexOf(a.name),o=a.expenses.map((function(t){return t.id})).indexOf(e.id),u=n.map((function(t){return t.id})).indexOf(e.id),i=Object(s.a)(p),l=Object(s.a)(n);-1!==o?(i[r].expenses.splice(o,1),l[u].categories-=1):(i[r].expenses.push(e),l[u].categories+=1),b(i),c(l)},changeDate:function(t){var e=t.expense,a=t.day,r=n.map((function(t){return t.id})).indexOf(e.id),o=Object(s.a)(n);o[r].date=a.date,c(o)},deleteCategory:function(t){var e=Object(s.a)(n),a=n.map((function(t){return t.id}));t.expenses.forEach((function(t){var n=a.indexOf(t.id);e[n].categories-=1})),c(e),b((function(e){return e.filter((function(e){return e.name!==t.name}))}))}};return Object(a.jsxs)("div",{className:"App",style:M,children:[Object(a.jsxs)("header",{children:[Object(a.jsxs)("div",{className:"flex",children:[Object(a.jsx)(d.a,{icon:m.a,onClick:function(){if(!k){S(!1);var t=f.b(n,(function(t){return f.n.floor(t.date)}))[0].getTime(),e=f.n.offset(j,-1);e.getTime()===t&&w(!0),h(e)}},className:"btn ".concat(k&&"disabled")}),Object(a.jsxs)("h1",{children:["Week of ",R(j)]}),Object(a.jsx)(d.a,{icon:m.b,onClick:function(){if(!D){w(!1);var t=f.b(n,(function(t){return f.n.floor(t.date)}))[1].getTime(),e=f.n.offset(j,1);e.getTime()===t&&S(!0),h(e)}},className:"btn ".concat(D&&"disabled")})]}),Object(a.jsx)("div",{className:"flex",children:Object(a.jsx)("input",{style:A,type:"text",placeholder:"Add category",onKeyDown:function(t){if(13===t.keyCode){var e={name:t.target.value,expenses:[],total:0};b([].concat(Object(s.a)(p),[e])),t.target.value=""}}})})]}),Object(a.jsxs)("svg",{width:F,height:1800,style:B,children:[E&&Object(a.jsx)($,Object(i.a)({},N)),E&&Object(a.jsx)(z,Object(i.a)({},N)),E&&Object(a.jsx)(C,Object(i.a)({},N))]})]})};u.a.render(Object(a.jsx)(c.a.StrictMode,{children:Object(a.jsx)(L,{})}),document.getElementById("root"))},43:function(t){t.exports=JSON.parse('[{"name":"Gas","date":"07/26/2020","amount":26},{"name":"Grocery","date":"07/28/2020","amount":31},{"name":"Gas","date":"07/30/2020","amount":7},{"name":"Gas","date":"07/22/2020","amount":33},{"name":"Grocery","date":"07/15/2020","amount":13},{"name":"Gas","date":"07/12/2020","amount":41},{"name":"Gas","date":"07/11/2020","amount":4},{"name":"Gas","date":"07/28/2020","amount":45},{"name":"Gas","date":"07/11/2020","amount":28},{"name":"Gas","date":"07/30/2020","amount":36},{"name":"Gas","date":"07/23/2020","amount":48},{"name":"Grocery","date":"07/26/2020","amount":41},{"name":"Grocery","date":"07/15/2020","amount":6},{"name":"Coffee","date":"07/24/2020","amount":46},{"name":"Gas","date":"07/22/2020","amount":39},{"name":"Gas","date":"07/25/2020","amount":2},{"name":"Coffee","date":"07/10/2020","amount":40},{"name":"Gas","date":"07/28/2020","amount":29},{"name":"Grocery","date":"07/12/2020","amount":22},{"name":"Coffee","date":"07/30/2020","amount":16},{"name":"Gas","date":"07/20/2020","amount":6},{"name":"Grocery","date":"07/12/2020","amount":30},{"name":"Gas","date":"07/15/2020","amount":12},{"name":"Grocery","date":"07/28/2020","amount":20},{"name":"Gas","date":"07/15/2020","amount":45},{"name":"Grocery","date":"07/11/2020","amount":45},{"name":"Coffee","date":"07/26/2020","amount":38},{"name":"Grocery","date":"07/25/2020","amount":45},{"name":"Coffee","date":"07/17/2020","amount":35},{"name":"Grocery","date":"07/30/2020","amount":27},{"name":"Grocery","date":"06/28/2020","amount":45},{"name":"Coffee","date":"06/25/2020","amount":38},{"name":"Grocery","date":"06/28/2020","amount":45},{"name":"Coffee","date":"06/21/2020","amount":35},{"name":"Grocery","date":"06/30/2020","amount":27}]')}},[[130,1,2]]]);
//# sourceMappingURL=main.a7229844.chunk.js.map